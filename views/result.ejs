<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="icon" href="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/microsoft/209/shopping-bags_1f6cd.png" />
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>Grocery</title>
    </head>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700&display=swap');
    * {
        color: white;
        font-family: 'Roboto Mono', monospace;
        font-weight: 700;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    body {
        background-color: #141414;
        min-height: 90vh;
        margin-left: 30px;
        overflow-x: hidden;
    }

    #text{
        font-size: 50px;
        color: white;    
        }
    h1{
        font-weight: 500;
        color: rgb(209, 197, 173);
    }

    h2{
        text-align: left;
    }
    .location{
        background-color: rgb(255, 255, 255, 0.1);
        border-radius: 3px;
        padding: 1.5rem;
        padding-right: 100px;
        width: 230px;
        margin-bottom: 25px;
    }

    .body{
        margin-right: 50px;
    }
    p{
        width: 300px;
        position: relative;
        font-weight: normal;
        text-align: left;
    }
    </style>
    <script type='text/javascript'>
      

        $(document).ready(function(){
            var location = <%= loc %>;

            $.ajax({
                url: "http://localhost:8080/result?location=" + location,
                type: 'GET',
                dataType: 'json', // added data type
                success: function(res) {
                    for(var i = 0; i < res.length; i++){
                        var address = JSON.stringify(res[i].address);
                        var name = JSON.stringify(res[i].name);
                        var isOpen = res[i].open;
                        var rating = JSON.stringify(res[i].rating);

                        var open = ""
                        if(isOpen){
                            open = "Open"
                        } else if (isOpen == false){
                            open = "Closed"
                        }
                        else{
                            open = ""
                        }
                        $(".body").append('<div class="location"><h2>' + name + '</h2><p>' + address + '</p><p>' + rating  + ' ‚≠ê</p><p>' + open + '</p></div> ');
                    }

                },
                error: function(error) {
                    console.log(error);
                }
            });
        });
    </script>
    <body>
        <div class="content">
            <div class="body">
                <h1><%= loc %></h1>
            </div>
        </div>
    </body>
</html>